【position機能追加プラグイン Ver.1.00】
http://hororo.wp.xdomain.jp/

2021/08/01更新 v507c対応版

-------------------------------------------------------------------------------------------------
■機能
-------------------------------------------------------------------------------------------------
  メッセージフレームに機能を追加するプラグイン。
　
  ◆機能
    ・パラメータでCSS吹き出しが作れます。
    ・キャラクターなど、指定した要素の周りに自動配置できます。
    ・キャラ名枠位置を、メッセージフレームの0位置から数値で指定できます。
      キャラ名枠位置を指定する事で、メッセージフレームを移動した時一緒に移動します。
    ・メッセージフレームに「border」を指定できます。
    ・メッセージフレームに「name（Class名）」を指定できます。
    ・メッセージフレームに画像を使う場合「background-size」を指定できます。
    ・公式タグ「position」のパラメータも使えます。※visibleは非対応。
    ・同じレイヤーであれば、パラメータ省略時は値が継承されます。
      ※layerはcurrentタグで指定されたレイヤが選択されます。

  ◆出来ない事
    ・メッセージの文字数に合わせて、自動でサイズ取得はできません。


-------------------------------------------------------------------------------------------------
■導入方法
-------------------------------------------------------------------------------------------------
  ①data/others/plugin に 「position_addfn」フォルダを入れてください。
　
  ②first.ks など、起動機に必ず読み込むファイルでプラグインを呼び出してください。
    [plugin name="position_addfn"]

  ③[mc_position] タグでメッセージフレームの指定をします。
    ※パラメータは分けて記述する事もできます。
      [mc_position layer="message0" page=fore width=500 height=200 margin=25 margint=54]
      [mc_position target_name=yamato border_size=3 border_color=0xffffff]
      [mc_position balloon=bottom balloon_size=20 chara_y=10 chara_x=15]


-------------------------------------------------------------------------------------------------
■パラメーター
-------------------------------------------------------------------------------------------------
  ※省略した場合は直前に指定した値のままになります。
  ※positionと同じパラメータは省略しています。

    パラメータ名      値             説明
    right             px値/%値       メッセージフレームの右位置を指定します。right優先。
    bottom            px値/%値       メッセージフレームの下位置を指定します。bottom優先。
    margin            px値           メッセージの全margin値を一括指定。各margin値優先。
    bg_size           cover等*1      frame使用時に、background-size を指定できます。
    border-size       px値           borderのサイズ。
    border_color      色             boederの色。
    balloon           方向*2         吹き出しの方向。
    balloon_size      px値           吹き出しのサイズ。※吹き出しは正三角形固定です。
    target_name       文字列         ターゲット要素の名前（class名）
    target_pos        方向*2         ターゲット要素のどの方向に表示するか。
    target_y          px値           ターゲット要素に対する表示位置調整（縦方向）-値で上、+値で下
    target_x          px値           ターゲット要素に対する表示位置調整（横方向）-値で左、+値で右
    chara_y           px値           キャラ名表示位置をメッセージフレームの0位置から数値で指定します（縦方向）
    chara_x           px値           キャラ名表示位置をメッセージフレームの0位置から数値で指定します（横方向）
    name              文字列         メッセージフレームにclass名を指定します。
                                     ※レイヤー指定がmessage0の場合、message0_fore にclass指定します。

    *1 cover/contain/数値等。複数の値の場合は「100%,100%」とカンマで入力してください。複数背景には非対応。
       詳しくは「CSS background-size」で検索してみてください。
    *2 top/right/left/bottom


  ◆吹き出しとborderについて
    ・吹き出しは各辺の中央に表示します。位置調整はできません。
    ・opacity は 枠線にも適応されます。
    ・色指定を rgba で指定する事で、背景色とborder色を別に透過できますが、その場合、吹き出し部分と枠部分の境が目立ちます。

  ◆ターゲット機能について
    ・ターゲット要素を動かしても自動で追従はしません。ターゲット要素を動かす時は[mc_psition]タグを再記述してください。
    ・target_name は、class指定されてる名前を指定してください。
      [chara_new name="akane" storage="chara/akane/normal.png" jname="あかね"]
      ↑上記の場合は、name="akane" の「akane」となります。jname では有効になりませんのでお気をつけください。
    ・キャラクター以外でも、classさえついていれば何でもターゲット対象になります。
    ・上下左右からはみ出る位置になる場合は、自動で画面内におさまるよう調整します。※キャラ名枠は非対応
    ・chara_y chara_x を指定した場合。メッセージフレーム表示位置を動かした時にキャラ名枠も移動します。

  ※ティラノスクリプト標準では、メッセージにpadding-topが自動で付くので上側にスペースができます。
    気になる場合は、「メッセージ枠調整プラグイン」との併用をおススメします。


-------------------------------------------------------------------------------------------------
■記述例
-------------------------------------------------------------------------------------------------
    例1：レイヤーmessage0、横幅500px、縦幅200px、メッセージの余白上50px・他25px
          [mc_position layer="message0" width=500 height=200 margin=25 margint=50]

    例2：akaneをターゲット、ターゲットの上側に表示、枠線3px、枠線の色白
          [mc_position target_name=akane target_pos=top border_size=3 border_color=0xffffff]

    例3：下側に吹き出し、吹き出しサイズ20px、キャラ名メッセージ枠左上から下に10px。右に15px
          [mc_position balloon=bottom balloon_size=20 chara_y=10 chara_x=15]


-------------------------------------------------------------------------------------------------
■動作確認
-------------------------------------------------------------------------------------------------
  ティラノスクリプトv507c


-------------------------------------------------------------------------------------------------
■免責
-------------------------------------------------------------------------------------------------
  このプラグインを使用したことにより生じた損害・損失に対して制作者は一切責任を負いません。


-------------------------------------------------------------------------------------------------
■利用規約
-------------------------------------------------------------------------------------------------
  ・改造・再配布は自由です。ただし、有償での再配布は禁止します。改造後データの配布も同様にお願いします。
  ・利用報告、クレジット表記は任意です。
  ・このプラグインはドネーションウェア（カンパウェア）です。
    もしよろしければ寄付をお願いいたします（強制ではありません）
  ・詳しくはブログの「利用規約」をお読み頂くようお願いいたします。
    http://hororo.wp.xdomain.jp/termsofuse/


-------------------------------------------------------------------------------------------------
■制作者
-------------------------------------------------------------------------------------------------
  name　　hororo
  site　　めも調　http://hororo.wp.xdomain.jp/
  mail　　ruru.amu@gmail.com
  twitter @hororo_memocho


-------------------------------------------------------------------------------------------------
■更新履歴
-------------------------------------------------------------------------------------------------
  2021/08/01　ver1.00  GitHubのみ公開
